<h1>Welcome to the Admin Dashboard</h1>
<p>This is the landing page for the admin dashboard.</p>
<p>Here you can manage traders, view transactions, and perform other administrative tasks.</p>

<h2>All Traders</h2>
<ul>
  <% @traders.each do |trader| %>
    <li><%= trader.email %> | approved: <%= trader.approved %></li>
    <%= link_to 'View', admins_trader_path(trader) %>
    <%= link_to 'Edit', edit_admins_trader_path(trader) %>
    <%= link_to "Delete", admins_trader_path(trader), data: { turbo_method: :delete, turbo_confirm: "Confirm Deletion?" } %>
  <% end %>
</ul>

<h2>Pending Trader Sign-ups</h2>
<table>
  <thead>
    <tr>
      <th>Email</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @pending_traders.each do |trader| %>
      <tr>
        <td><%= trader.email %></td>
        <td>
            <%= button_to 'Approve', admins_approve_trader_path(trader), method: :patch %>
            <%= link_to "Reject", admins_reject_trader_path(trader), data: { turbo_method: :delete, turbo_confirm: "Confirm Rejection?" } %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<h2>Create New Trader</h2>
<%= form_for(User.new, url: admins_traders_path) do |f| %>
  <div>
    <%= f.label :email, "Email:" %>
    <%= f.email_field :email, required: true %>
  </div>

  <div>
    <%= f.label :password, "Password:" %>
    <%= f.password_field :password, required: true %>
  </div>
 
  <%= f.submit "Create Trader" %>
<% end %>

<h2>All Transactions</h2>
<table>
  <thead>
    <tr>
      <th>Action</th>
      <th>User</th>
      <th>Symbol</th>
      <th>Quantity</th>
      <th>Date</th>
    </tr>
  </thead>
  <tbody>
    <% @transactions.each do |transaction| %>
      <tr>
        <td><%= transaction.action %></td>
        <td><%= transaction.user.email %></td>
        <td><%= transaction.symbol %></td>
        <td><%= transaction.quantity %></td>
        <td><%= transaction.updated_at %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<br />
<br />
<%= form_tag(destroy_user_session_path, method: :delete) do %>
  <%= submit_tag "Sign out" %>
<% end %>